{"ast":null,"code":"import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\nimport ThunkMiddleware from 'redux-thunk';\nimport moviesReducer from './reducers/moviesReducer';\nimport settingsReducer from './reducers/settingsReducer';\nimport watchListReducer from './reducers/watchListReducer';\nimport { ADD_MOVIE, CHANGE_ORDER, REMOVE_MOVIE } from './constants';\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst reducer = combineReducers({\n  settings: settingsReducer,\n  movies: moviesReducer,\n  watchList: watchListReducer\n});\n\nconst addWatchListToLocalStorage = store => next => action => {\n  next(action);\n\n  if (action.type === ADD_MOVIE || action.type === CHANGE_ORDER || action.type === REMOVE_MOVIE) {\n    localStorage.setItem('watch-list', JSON.stringify(store.getState().watchList));\n  }\n};\n\nconst middlewareArr = [ThunkMiddleware, addWatchListToLocalStorage];\nexport default createStore(reducer, composeEnhancers(applyMiddleware(...middlewareArr)));","map":{"version":3,"sources":["C:/prog/eleksPractice/moviesapp/src/store.js"],"names":["createStore","combineReducers","applyMiddleware","compose","ThunkMiddleware","moviesReducer","settingsReducer","watchListReducer","ADD_MOVIE","CHANGE_ORDER","REMOVE_MOVIE","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reducer","settings","movies","watchList","addWatchListToLocalStorage","store","next","action","type","localStorage","setItem","JSON","stringify","getState","middlewareArr"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,eAAtB,EAAuCC,eAAvC,EAAwDC,OAAxD,QAAuE,OAAvE;AACA,OAAOC,eAAP,MAA4B,aAA5B;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AACA,OAAOC,eAAP,MAA4B,4BAA5B;AACA,OAAOC,gBAAP,MAA6B,6BAA7B;AACA,SACIC,SADJ,EAEIC,YAFJ,EAGIC,YAHJ,QAIO,aAJP;AAMA,MAAMC,gBAAgB,GAAGC,MAAM,CAACC,oCAAP,IAA+CV,OAAxE;AACA,MAAMW,OAAO,GAAGb,eAAe,CAAC;AAC5Bc,EAAAA,QAAQ,EAAET,eADkB;AAE5BU,EAAAA,MAAM,EAAEX,aAFoB;AAG5BY,EAAAA,SAAS,EAAEV;AAHiB,CAAD,CAA/B;;AAMA,MAAMW,0BAA0B,GAAIC,KAAD,IAAYC,IAAD,IAAWC,MAAD,IAAY;AAChED,EAAAA,IAAI,CAACC,MAAD,CAAJ;;AACA,MACIA,MAAM,CAACC,IAAP,KAAgBd,SAAhB,IACAa,MAAM,CAACC,IAAP,KAAgBb,YADhB,IAEAY,MAAM,CAACC,IAAP,KAAgBZ,YAHpB,EAIE;AACAa,IAAAA,YAAY,CAACC,OAAb,CACE,YADF,EAEEC,IAAI,CAACC,SAAL,CAAeP,KAAK,CAACQ,QAAN,GAAiBV,SAAhC,CAFF;AAID;AACJ,CAZD;;AAcA,MAAMW,aAAa,GAAG,CAACxB,eAAD,EAAkBc,0BAAlB,CAAtB;AAEA,eAAelB,WAAW,CACxBc,OADwB,EAExBH,gBAAgB,CACdT,eAAe,CAAC,GAAG0B,aAAJ,CADD,CAFQ,CAA1B","sourcesContent":["import { createStore, combineReducers, applyMiddleware, compose } from 'redux';\r\nimport ThunkMiddleware from 'redux-thunk';\r\nimport moviesReducer from './reducers/moviesReducer';\r\nimport settingsReducer from './reducers/settingsReducer';\r\nimport watchListReducer from './reducers/watchListReducer';\r\nimport {\r\n    ADD_MOVIE,\r\n    CHANGE_ORDER,\r\n    REMOVE_MOVIE\r\n} from './constants';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst reducer = combineReducers({\r\n    settings: settingsReducer,\r\n    movies: moviesReducer,\r\n    watchList: watchListReducer\r\n});\r\n\r\nconst addWatchListToLocalStorage = (store) => (next) => (action) => {\r\n    next(action)\r\n    if (\r\n        action.type === ADD_MOVIE ||\r\n        action.type === CHANGE_ORDER || \r\n        action.type === REMOVE_MOVIE\r\n    ) {\r\n      localStorage.setItem(\r\n        'watch-list',\r\n        JSON.stringify(store.getState().watchList)\r\n      )\r\n    }\r\n}\r\n\r\nconst middlewareArr = [ThunkMiddleware, addWatchListToLocalStorage]\r\n\r\nexport default createStore(\r\n  reducer, \r\n  composeEnhancers(\r\n    applyMiddleware(...middlewareArr)\r\n  ),\r\n);"]},"metadata":{},"sourceType":"module"}