{"ast":null,"code":"import _objectSpread from \"C:\\\\prog\\\\eleksPractice\\\\moviesapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport API from '../API';\nimport appDataActions from '../actions/appDataActions';\n\nconst additionalDataById = results => {\n  return results.reduce((acc, curr) => {\n    acc[curr.id] = curr;\n    return acc;\n  }, {});\n};\n\nexport const getMovieById = id => async dispatch => {\n  dispatch(appDataActions.setFetching(true, false));\n\n  try {\n    const response = await API.getDetails(id);\n    dispatch(setData(response));\n    dispatch(setFetching(false));\n    dispatch(setFetched(true));\n  } catch (error) {\n    dispatch(setError(error));\n    dispatch(setFetching(false));\n    dispatch(setFetched(false));\n  }\n};\nexport const getMovieByQuery = settings => async dispatch => {\n  dispatch(appDataActions.setFetching({\n    isFetching: true,\n    isFetched: false\n  }));\n\n  try {\n    const _ref = await API.getMovieByQuery(settings),\n          results = _ref.results,\n          total_pages = _ref.total_pages;\n\n    dispatch(appDataActions.setDataById(_objectSpread({}, additionalDataById(results))));\n    dispatch(appDataActions.setData({\n      data: results,\n      totalPages: total_pages\n    }));\n    dispatch(appDataActions.setFetching({\n      isFetching: false,\n      isFetched: true\n    }));\n  } catch (error) {\n    dispatch(appDataActions.setError(error));\n    dispatch(appDataActions.setFetching({\n      isFetching: false,\n      isFetched: false\n    }));\n  }\n};\nexport const discoverMovies = settings => async dispatch => {\n  dispatch(appDataActions.setFetching({\n    isFetching: true,\n    isFetched: false\n  }));\n\n  try {\n    const _ref2 = await API.getMovieDiscover(settings),\n          results = _ref2.results,\n          total_pages = _ref2.total_pages;\n\n    console.log(results);\n    dispatch(appDataActions.setData({\n      data: results,\n      totalPages: total_pages\n    }));\n    dispatch(appDataActions.setFetching({\n      isFetching: false,\n      isFetched: true\n    }));\n  } catch (error) {\n    dispatch(appDataActions.setError(error));\n    dispatch(appDataActions.setFetching({\n      isFetching: false,\n      isFetched: false\n    }));\n  }\n};","map":{"version":3,"sources":["C:/prog/eleksPractice/moviesapp/src/actions/asyncActions.js"],"names":["API","appDataActions","additionalDataById","results","reduce","acc","curr","id","getMovieById","dispatch","setFetching","response","getDetails","setData","setFetched","error","setError","getMovieByQuery","settings","isFetching","isFetched","total_pages","setDataById","data","totalPages","discoverMovies","getMovieDiscover","console","log"],"mappings":"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","sourcesContent":["import API from '../API';\r\nimport appDataActions from '../actions/appDataActions';\r\n\r\nconst additionalDataById = results => {\r\n  return results.reduce((acc, curr) => {\r\n    acc[curr.id] = curr;\r\n    return acc;\r\n  }, {});\r\n}\r\n\r\nexport const getMovieById = id => async dispatch => {\r\n  dispatch(appDataActions.setFetching(true, false));\r\n\r\n  try {\r\n    const response = await API.getDetails(id);\r\n    dispatch(setData(response));\r\n    dispatch(setFetching(false));\r\n    dispatch(setFetched(true));\r\n  }\r\n  catch (error) {\r\n    dispatch(setError(error));\r\n    dispatch(setFetching(false));\r\n    dispatch(setFetched(false));\r\n  }\r\n};\r\n\r\nexport const getMovieByQuery = settings => async dispatch => {\r\n  dispatch(appDataActions.setFetching({\r\n    isFetching: true,\r\n    isFetched: false\r\n  }));\r\n\r\n  try {\r\n    const { results, total_pages } = await API.getMovieByQuery(settings);\r\n    dispatch(appDataActions.setDataById({\r\n      ...additionalDataById(results)\r\n    }));\r\n    dispatch(appDataActions.setData({ data: results, totalPages: total_pages}));\r\n    dispatch(appDataActions.setFetching({\r\n      isFetching: false,\r\n      isFetched: true\r\n    }));\r\n  } catch (error) {\r\n    dispatch(appDataActions.setError(error));\r\n    dispatch(appDataActions.setFetching({\r\n      isFetching: false,\r\n      isFetched: false\r\n    }));\r\n  }\r\n};\r\n\r\nexport const discoverMovies = settings => async dispatch => {\r\n  dispatch(appDataActions.setFetching({\r\n    isFetching: true,\r\n    isFetched: false\r\n  }));\r\n\r\n  try {\r\n    const { results, total_pages } = await API.getMovieDiscover(settings);\r\n    console.log(results);\r\n    dispatch(appDataActions.setData({ data: results, totalPages: total_pages}));\r\n    dispatch(appDataActions.setFetching({\r\n      isFetching: false,\r\n      isFetched: true\r\n    }));\r\n  } catch (error) {\r\n    dispatch(appDataActions.setError(error));\r\n    dispatch(appDataActions.setFetching({\r\n      isFetching: false,\r\n      isFetched: false\r\n    }));\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}