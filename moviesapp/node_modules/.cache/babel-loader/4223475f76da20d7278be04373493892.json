{"ast":null,"code":"import _objectSpread from \"C:\\\\prog\\\\eleksPractice\\\\moviesapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\prog\\\\eleksPractice\\\\moviesapp\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\prog\\\\eleksPractice\\\\moviesapp\\\\src\\\\components\\\\App2.js\";\nimport React, { useState, useEffect } from 'react';\n\nfunction App() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        data = _useState2[0],\n        setData = _useState2[1];\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        dataById = _useState4[0],\n        setDataById = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        totalPages = _useState6[0],\n        setTotalPages = _useState6[1];\n\n  const _useState7 = useState({\n    sorting: localStorage.getItem('sorting') || 'trending',\n    page: localStorage.getItem('page') || 1,\n    searchQuery: ''\n  }),\n        _useState8 = _slicedToArray(_useState7, 2),\n        settings = _useState8[0],\n        setSettings = _useState8[1];\n\n  useEffect(() => {\n    const searchQuery = settings.searchQuery,\n          sorting = settings.sorting,\n          page = settings.page;\n    const requstFuncKey = searchQuery.trim() ? SEARCH : sorting;\n    const requestFunc = REQUEST_MAP[requstFuncKey];\n    localStorage.setItem('page', page);\n    localStorage.setItem('sorting', sorting);\n    requestFunc(settings).then(({\n      total_pages,\n      results\n    }) => {\n      setData(results);\n      setTotalPages(total_pages);\n      const additionalDataById = results.reduce((res, curr) => {\n        res[curr.id] = curr;\n        return res;\n      }, {});\n      setDataById(_objectSpread({}, dataById, {}, additionalDataById));\n    });\n  }, [settings]);\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/prog/eleksPractice/moviesapp/src/components/App2.js"],"names":["React","useState","useEffect","App","data","setData","dataById","setDataById","totalPages","setTotalPages","sorting","localStorage","getItem","page","searchQuery","settings","setSettings","requstFuncKey","trim","SEARCH","requestFunc","REQUEST_MAP","setItem","then","total_pages","results","additionalDataById","reduce","res","curr","id"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;AAEA,SAASC,GAAT,GAAe;AAAA,oBACWF,QAAQ,CAAC,EAAD,CADnB;AAAA;AAAA,QACNG,IADM;AAAA,QACAC,OADA;;AAAA,qBAEmBJ,QAAQ,CAAC,EAAD,CAF3B;AAAA;AAAA,QAENK,QAFM;AAAA,QAEIC,WAFJ;;AAAA,qBAGwBN,QAAQ,CAAC,CAAD,CAHhC;AAAA;AAAA,QAGNO,UAHM;AAAA,QAGOC,aAHP;;AAAA,qBAImBR,QAAQ,CAAC;AACvCS,IAAAA,OAAO,EAAEC,YAAY,CAACC,OAAb,CAAqB,SAArB,KAAmC,UADL;AAEvCC,IAAAA,IAAI,EAAEF,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC,CAFC;AAGvCE,IAAAA,WAAW,EAAE;AAH0B,GAAD,CAJ3B;AAAA;AAAA,QAINC,QAJM;AAAA,QAIIC,WAJJ;;AAUbd,EAAAA,SAAS,CAAC,MAAM;AAAA,UACNY,WADM,GACyBC,QADzB,CACND,WADM;AAAA,UACOJ,OADP,GACyBK,QADzB,CACOL,OADP;AAAA,UACgBG,IADhB,GACyBE,QADzB,CACgBF,IADhB;AAEd,UAAMI,aAAa,GAAGH,WAAW,CAACI,IAAZ,KAAqBC,MAArB,GAA8BT,OAApD;AACA,UAAMU,WAAW,GAAGC,WAAW,CAACJ,aAAD,CAA/B;AAEAN,IAAAA,YAAY,CAACW,OAAb,CAAqB,MAArB,EAA6BT,IAA7B;AACAF,IAAAA,YAAY,CAACW,OAAb,CAAqB,SAArB,EAAgCZ,OAAhC;AAEAU,IAAAA,WAAW,CAACL,QAAD,CAAX,CACCQ,IADD,CACM,CAAC;AAACC,MAAAA,WAAD;AAAcC,MAAAA;AAAd,KAAD,KAA4B;AAChCpB,MAAAA,OAAO,CAACoB,OAAD,CAAP;AACAhB,MAAAA,aAAa,CAACe,WAAD,CAAb;AAEA,YAAME,kBAAkB,GAAGD,OAAO,CAACE,MAAR,CAAe,CAACC,GAAD,EAAMC,IAAN,KAAe;AACvDD,QAAAA,GAAG,CAACC,IAAI,CAACC,EAAN,CAAH,GAAeD,IAAf;AACA,eAAOD,GAAP;AACD,OAH0B,EAGxB,EAHwB,CAA3B;AAKArB,MAAAA,WAAW,mBACND,QADM,MAENoB,kBAFM,EAAX;AAID,KAdD;AAeD,GAvBQ,EAuBN,CAACX,QAAD,CAvBM,CAAT;AAyBA,SACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD;;AAED,eAAeZ,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction App() {\r\n  const [data, setData] = useState([]);\r\n  const [dataById, setDataById] = useState({});\r\n  const [totalPages , setTotalPages] = useState(0);\r\n  const [settings, setSettings] = useState({\r\n    sorting: localStorage.getItem('sorting') || 'trending',\r\n    page: localStorage.getItem('page') || 1,\r\n    searchQuery: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    const { searchQuery, sorting, page } = settings;\r\n    const requstFuncKey = searchQuery.trim() ? SEARCH : sorting;\r\n    const requestFunc = REQUEST_MAP[requstFuncKey];\r\n\r\n    localStorage.setItem('page', page);\r\n    localStorage.setItem('sorting', sorting);\r\n\r\n    requestFunc(settings)\r\n    .then(({total_pages, results}) => {\r\n      setData(results);\r\n      setTotalPages(total_pages);\r\n\r\n      const additionalDataById = results.reduce((res, curr) => {\r\n        res[curr.id] = curr;\r\n        return res;\r\n      }, {});\r\n\r\n      setDataById({\r\n        ...dataById,\r\n        ...additionalDataById\r\n      });\r\n    })\r\n  }, [settings]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <input type='text' />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}